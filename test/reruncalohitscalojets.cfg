process RERUNCALOJETS = {
  untracked PSet maxEvents = {untracked int32 input = 10}
  source = PoolSource {
     untracked vstring fileNames = {
#'/store/RelVal/2007/6/30/RelVal-RelVal151QCD_pt80_120-1183231184/0000/40B43AAC-6527-DC11-B866-000E0C3E6D5B.root'
'/store/mc/2007/8/18/RelVal-RelVal160pre10BJets50-120-1187441218/0000/DE2F2742-F74E-DC11-8142-00304875AA13.root'
#'/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt50_80-CMSSW_1_6_0_pre9-1186773613/0000/0485B1DF-E247-DC11-9D71-003048728771.root'
     }
  }

replace PoolSource.fileNames = {
'/store/RelVal/2007/8/13/RelVal-RelVal145QCD_pt50_80-1186999371/0003/122C11AC-9149-DC11-AF91-000423D98F98.root'
#'/store/RelVal/2007/8/13/RelVal-RelVal145QCD_pt50_80-1186999371/0003/38973812-8C49-DC11-AC76-0030485629A6.root',
#'/store/RelVal/2007/8/13/RelVal-RelVal145QCD_pt50_80-1186999371/0003/4231E1A6-9149-DC11-9014-000423D98DC4.root',
#'/store/RelVal/2007/8/13/RelVal-RelVal145QCD_pt50_80-1186999371/0003/5AC07C0F-8C49-DC11-AE54-00304855D52A.root',
#'/store/RelVal/2007/8/13/RelVal-RelVal145QCD_pt50_80-1186999371/0003/6E6AE2CB-8D49-DC11-AA0F-00304855D5FA.root',
#'/store/RelVal/2007/8/13/RelVal-RelVal145QCD_pt50_80-1186999371/0003/F855C30D-8C49-DC11-BADB-001617DBD5B2.root'
}

  module out = PoolOutputModule
  { 
    untracked string fileName = "/tmp/cgtully/jetsfromhits.root"
      untracked vstring outputCommands = {
     "drop *",
     "keep recoCaloJets_*_*_*",
     "keep recoGenJets_*_*_*",
     "keep recoBasicJets_*_*_*",
     "keep *_caloTowers_*_*",
     "keep *_towerMaker_*_*",
     "keep *_caloRecHitCandidates_*_*"
     }
  }

   service = Timing {}

//include "Configuration/StandardSequences/data/FakeConditions.cff"
include "CalibCalorimetry/Configuration/data/Hcal_FakeConditions.cff"
include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"include "RecoLocalCalo/Configuration/data/RecoLocalCalo.cff"
include "RecoJets/Configuration/data/CaloTowersRec.cff"
include "RecoJets/Configuration/data/RecoJets.cff"

module caloRecHitCandidates = CaloRecHitCandidateProducer {
      double HBThreshold = 0.9     // GeV, Scheme B
      double HOThreshold = 1.1     // GeV, Scheme B
      double HESThreshold = 1.4    // GeV, Scheme B
      double HEDThreshold = 1.4    // GeV, Scheme B
      double HF1Threshold = 1.2   // GeV, Oprimized on 10% occupancy
      double HF2Threshold = 1.8   // GeV, Oprimized on 10% occupancy
      double EBThreshold = 0.09    // GeV, ORCA value w/o selective readout
      double EEThreshold = 0.45    // GeV, ORCA value w/o selective readout
      
      double EBWeight = 1.0
      double EEWeight = 1.0
      double HBWeight = 1.0
      double HESWeight = 1.0
      double HEDWeight = 1.0
      double HOWeight = 1.0
      double HF1Weight = 1.0
      double HF2Weight = 1.0
      bool UseHO = true
      InputTag hbheInput = hbhereco
      InputTag hoInput = horeco
      InputTag hfInput = hfreco
      VInputTag ecalInputs = { ecalRecHit:EcalRecHitsEB, ecalRecHit:EcalRecHitsEE }
      untracked bool AllowMissingInputs = false
}

  module midPointCone5BasicJetsFromCalohits = MidpointJetProducer {
       untracked string alias = "MC5CalohitJet"
       using MconeJetParameters
       double inputEtMin = 0.5
	double inputEMin = 0.
        InputTag src = caloRecHitCandidates
        untracked string jetType = "BasicJet"
        untracked bool verbose = true
       
       double coneRadius = 0.5       
}


path p = { hcalLocalRecoSequence, caloRecHitCandidates, midPointCone5BasicJetsFromCalohits}

  endpath outpath = {out}
}
